<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  </head>
  <body class="min-h-screen bg-base-200">
    <%- include('../partials/navbar') %>

    <main id="app" class="container mx-auto p-4 space-y-6">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="text-3xl"><span>{{ project.icon || 'ðŸ“Š' }}</span></div>
          <div>
            <h1 class="text-2xl font-bold">{{ project.name }}</h1>
            <p class="text-sm text-base-content/70">
              Environment: <span class="capitalize">{{ project.environment }}</span>
              â€¢ Role: <span class="capitalize">{{ currentProjectRole }}</span>
            </p>
          </div>
        </div>
        <%- include('../partials/analytics-subnav', { project, currentSection }) %>
      </div>

      <% if (errors && errors.length) { %>
      <div class="alert alert-error">
        <ul class="list-disc list-inside text-sm">
          <% errors.forEach(function (err) { %>
          <li><%= err %></li>
          <% }) %>
        </ul>
      </div>
      <% } %>

      <% if (successMessage) { %>
      <div class="alert alert-success">
        <span class="text-sm"><%= successMessage %></span>
      </div>
      <% } %>

      <!-- Section 1: Project Details -->
      <section class="card bg-base-100 shadow">
        <div class="card-body space-y-4">
          <h2 class="card-title text-xl">Project details</h2>
          <form
            action="/projects/<%= project._id %>/update"
            method="POST"
            class="grid grid-cols-1 md:grid-cols-2 gap-4"
          >
            <div class="form-control">
              <label class="label" for="name">
                <span class="label-text">Name</span>
              </label>
              <input
                id="name"
                name="name"
                type="text"
                required
                class="input input-bordered w-full"
                value="<%= values && values.name ? values.name : project.name %>"
              />
            </div>

            <div class="form-control">
              <label class="label" for="icon">
                <span class="label-text">Icon</span>
              </label>
              <input
                id="icon"
                name="icon"
                type="text"
                maxlength="8"
                class="input input-bordered w-full"
                value="<%= values && values.icon ? values.icon : project.icon %>"
              />
            </div>

            <div class="form-control">
              <label class="label" for="environment">
                <span class="label-text">Environment</span>
              </label>
              <select
                id="environment"
                name="environment"
                class="select select-bordered w-full"
              >
                <% (environments || []).forEach(function (env) { %>
                <option
                  value="<%= env %>"
                  <%= (values && values.environment === env) || (!values && project.environment === env) ? 'selected' : '' %>
                >
                  <%= env.charAt(0).toUpperCase() + env.slice(1) %>
                </option>
                <% }) %>
              </select>
            </div>

            <div class="form-control">
              <label class="label" for="dataRetentionDays">
                <span class="label-text">Data retention (days)</span>
              </label>
              <input
                id="dataRetentionDays"
                name="dataRetentionDays"
                type="number"
                min="1"
                max="365"
                class="input input-bordered w-full"
                value="<%= values && values.dataRetentionDays ? values.dataRetentionDays : project.dataRetentionDays %>"
              />
              <label class="label">
                <span class="label-text-alt text-base-content/60">
                  How long ingested data is kept before being permanently removed.
                </span>
              </label>
            </div>

            <div class="form-control md:col-span-2 flex flex-row gap-2 justify-end mt-2">
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
          </form>
        </div>
      </section>

      <!-- Section 2: API Keys -->
      <section class="card bg-base-100 shadow">
        <div class="card-body space-y-4">
          <div class="flex items-center justify-between">
            <h2 class="card-title text-xl">API keys</h2>
            <span class="badge badge-outline">Server-side & client usage</span>
          </div>

          <div class="alert alert-warning text-sm">
            <span>
              Never expose your secret key in public clients. Use the public key in
              browser contexts and keep the secret key on your server only.
            </span>
          </div>

          <div class="bg-base-200 rounded-lg p-4">
            <div class="flex items-center justify-between gap-4">
              <h3 class="font-semibold">Browser SDK (SuperInsights)</h3>
              <button
                type="button"
                class="btn btn-sm"
                @click="copyToClipboard(sdkSnippet, 'SDK snippet copied')"
              >
                Copy snippet
              </button>
            </div>
            <p class="text-sm text-base-content/70 mt-1">
              Add this snippet to your site to enable automatic page views, error tracking, and performance metrics.
            </p>
            <pre class="mt-3 p-3 bg-base-100 rounded border border-base-300 text-xs overflow-x-auto"><code>{{ sdkSnippet }}</code></pre>
            <div class="mt-3">
              <button
                type="button"
                class="btn btn-outline btn-sm"
                @click="copyToClipboard(trackEventExample, 'trackEvent example copied')"
              >
                Copy trackEvent example
              </button>
              <pre class="mt-2 p-3 bg-base-100 rounded border border-base-300 text-xs overflow-x-auto"><code>{{ trackEventExample }}</code></pre>
            </div>

            <div class="mt-3">
              <button
                type="button"
                class="btn btn-outline btn-sm"
                @click="copyToClipboard(trackTimingExample, 'trackTiming example copied')"
              >
                Copy trackTiming example
              </button>
              <pre class="mt-2 p-3 bg-base-100 rounded border border-base-300 text-xs overflow-x-auto"><code>{{ trackTimingExample }}</code></pre>
            </div>

            <div class="mt-3">
              <button
                type="button"
                class="btn btn-outline btn-sm"
                @click="copyToClipboard(timeAsyncExample, 'timeAsync example copied')"
              >
                Copy timeAsync example
              </button>
              <pre class="mt-2 p-3 bg-base-100 rounded border border-base-300 text-xs overflow-x-auto"><code>{{ timeAsyncExample }}</code></pre>
            </div>
          </div>

          <div class="space-y-4">
            <div class="form-control">
              <label class="label">
                <span class="label-text">Public API key</span>
              </label>
              <div class="join w-full">
                <input
                  type="text"
                  readonly
                  class="input input-bordered join-item w-full"
                  :value="project.publicApiKey"
                />
                <button
                  type="button"
                  class="btn join-item"
                  @click="copyToClipboard(project.publicApiKey, 'Public key copied')"
                >
                  Copy
                </button>
              </div>
            </div>

            <div class="form-control">
              <label class="label">
                <span class="label-text">Secret API key</span>
              </label>
              <div class="join w-full">
                <input
                  :type="showSecret ? 'text' : 'password'"
                  readonly
                  class="input input-bordered join-item w-full"
                  :value="project.secretApiKey"
                />
                <button
                  type="button"
                  class="btn join-item"
                  @click="toggleSecret()"
                >
                  {{ showSecret ? 'Hide' : 'Show' }}
                </button>
                <button
                  type="button"
                  class="btn join-item"
                  @click="copyToClipboard(project.secretApiKey, 'Secret key copied')"
                >
                  Copy
                </button>
              </div>
            </div>
          </div>

          <div v-if="canRegenerateKeys" class="mt-4">
            <button
              type="button"
              class="btn btn-outline btn-error"
              @click="openRegenerateModal()"
            >
              Regenerate keys
            </button>
          </div>

          <!-- Regenerate confirmation modal -->
          <dialog ref="regenerateModal" class="modal">
            <div class="modal-box">
              <h3 class="font-bold text-lg mb-2">Regenerate API keys?</h3>
              <p class="text-sm text-base-content/70 mb-4">
                This will invalidate the current keys immediately. Make sure you
                update any servers or clients using these keys.
              </p>
              <div class="modal-action">
                <form method="dialog" class="flex gap-2">
                  <button type="button" class="btn" @click="closeRegenerateModal()">
                    Cancel
                  </button>
                </form>
                <form
                  action="/projects/<%= project._id %>/regenerate-keys"
                  method="POST"
                >
                  <button type="submit" class="btn btn-error">
                    Yes, regenerate
                  </button>
                </form>
              </div>
            </div>
          </dialog>
        </div>
      </section>

      <% if (currentProjectRole === 'owner') { %>
      <section class="card bg-base-100 shadow">
        <div class="card-body space-y-4">
          <div class="flex items-center justify-between">
            <h2 class="card-title text-xl">Public access (view-only)</h2>
            <% if (project.publicLinkEnabled) { %>
              <span class="badge badge-success">Enabled</span>
            <% } else { %>
              <span class="badge badge-outline">Disabled</span>
            <% } %>
          </div>

          <div class="alert alert-warning text-sm">
            <span>
              Anyone with this link can view your project analytics.
            </span>
          </div>

          <% if (project.publicLinkEnabled && project.publicLinkToken) { %>
          <div class="form-control">
            <label class="label">
              <span class="label-text">Public link</span>
            </label>
            <div class="join w-full">
              <input
                type="text"
                readonly
                class="input input-bordered join-item w-full"
                :value="publicLinkUrl"
              />
              <button
                type="button"
                class="btn join-item"
                @click="copyToClipboard(publicLinkUrl, 'Public link copied')"
              >
                Copy
              </button>
            </div>
          </div>

          <div class="flex flex-col md:flex-row gap-2">
            <form action="/projects/<%= project._id %>/public-link/regenerate" method="POST">
              <button type="submit" class="btn btn-outline btn-warning">Regenerate</button>
            </form>
            <form action="/projects/<%= project._id %>/public-link/revoke" method="POST">
              <button type="submit" class="btn btn-outline btn-error">Disable</button>
            </form>
          </div>
          <% } else { %>
          <form action="/projects/<%= project._id %>/public-link/enable" method="POST">
            <button type="submit" class="btn btn-primary">Generate public link</button>
          </form>
          <% } %>
        </div>
      </section>
      <% } %>

      <!-- Drop data ingestion (events) -->
      <section class="card bg-base-100 shadow">
        <div class="card-body space-y-4">
          <div class="flex items-center justify-between">
            <h2 class="card-title text-xl">Drop data ingestion</h2>
            <span class="badge badge-outline">Events only</span>
          </div>

          <p class="text-sm text-base-content/70">
            When enabled, the ingestion API will either drop matching events (blacklist) or drop non-matching events (whitelist).
            This can be extended later to errors, page views, and performance metrics.
          </p>

          <form action="/projects/<%= project._id %>/settings/drop-events" method="POST" class="space-y-4">
            <div class="form-control">
              <label class="label cursor-pointer justify-start gap-3">
                <input type="checkbox" name="dropEnabled" class="toggle" v-model="dropEnabled" />
                <span class="label-text">Enable drop rules</span>
              </label>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-control">
                <label class="label">
                  <span class="label-text">Mode</span>
                </label>
                <div class="flex flex-col gap-2">
                  <label class="label cursor-pointer justify-start gap-3">
                    <input type="radio" name="dropMode" value="blacklist" class="radio" v-model="dropMode" />
                    <span class="label-text">Blacklist (drop matching events)</span>
                  </label>
                  <label class="label cursor-pointer justify-start gap-3">
                    <input type="radio" name="dropMode" value="whitelist" class="radio" v-model="dropMode" />
                    <span class="label-text">Whitelist (allow matching events only)</span>
                  </label>
                </div>
              </div>

              <div class="form-control">
                <label class="label">
                  <span class="label-text">Dropped events (in-memory)</span>
                </label>
                <div class="flex flex-col gap-2">
                  <div class="text-sm">
                    <span class="font-mono">{{ dropEventsCount }}</span>
                  </div>
                  <button type="button" class="btn btn-outline btn-sm" @click="reportDrops()">
                    Report drops
                  </button>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div>
              <div class="flex items-center justify-between">
                <h3 class="font-semibold">Metadata filters (AND)</h3>
                <button type="button" class="btn btn-sm" @click="addDropFilterRow()">Add filter</button>
              </div>
              <p class="text-sm text-base-content/70 mt-1">
                Filters match against event top-level fields and event properties (e.g. <span class="font-mono">clientId</span> or <span class="font-mono">properties.clientId</span>).
              </p>

              <div class="mt-3 space-y-2">
                <div v-for="(f, idx) in dropFilters" :key="idx" class="grid grid-cols-1 md:grid-cols-7 gap-2 items-center">
                  <div class="md:col-span-2">
                    <input
                      type="text"
                      name="dropFilterKey"
                      class="input input-bordered w-full"
                      placeholder="key (e.g. clientId)"
                      v-model="f.key"
                    />
                  </div>
                  <div class="md:col-span-2">
                    <select
                      name="dropFilterOp"
                      class="select select-bordered w-full"
                      v-model="f.op"
                    >
                      <option value="equals">equals</option>
                      <option value="contains">contains</option>
                      <option value="lowerThan">lowerThan</option>
                      <option value="greaterThan">greaterThan</option>
                    </select>
                  </div>
                  <div class="md:col-span-2">
                    <input
                      type="text"
                      name="dropFilterValue"
                      class="input input-bordered w-full"
                      :placeholder="f.op === 'contains' ? 'values (e.g. 73,123,45)' : 'value (e.g. 73)'"
                      v-model="f.value"
                    />
                  </div>
                  <div class="md:col-span-1">
                    <button type="button" class="btn btn-ghost btn-sm" @click="removeDropFilterRow(idx)">
                      Remove
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-control flex flex-row gap-2 justify-end">
              <button type="submit" class="btn btn-primary">Save drop settings</button>
            </div>
          </form>
        </div>
      </section>

      <!-- Section 3: Team Members -->
      <section class="card bg-base-100 shadow">
        <div class="card-body space-y-4">
          <div class="flex items-center justify-between">
            <h2 class="card-title text-xl">Team members</h2>
            <span class="badge badge-outline">Your role: <span class="ml-1 capitalize"><%= currentProjectRole %></span></span>
          </div>

          <div class="overflow-x-auto">
            <table class="table table-zebra w-full text-sm">
              <thead>
                <tr>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Added</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% if (users && users.length) { %>
                <% users.forEach(function (entry) { %>
                <tr>
                  <td><%= entry.userId && entry.userId.email ? entry.userId.email : '' %></td>
                  <td class="capitalize"><%= entry.role %></td>
                  <td>
                    <% if (entry.createdAt) { %>
                    <%= entry.createdAt.toISOString() %>
                    <% } %>
                  </td>
                  <td class="text-right">
                    <% const isOwner = entry.role === 'owner'; %>
                    <% const isLastOwner = users.filter(function (u) { return u.role === 'owner'; }).length === 1 && isOwner; %>
                    <% if (currentProjectRole === 'owner' && !isLastOwner) { %>
                    <form
                      action="/projects/<%= project._id %>/users/remove"
                      method="POST"
                      class="inline"
                    >
                      <input type="hidden" name="userId" value="<%= entry.userId ? entry.userId._id : '' %>" />
                      <button
                        type="submit"
                        class="btn btn-ghost btn-xs text-error"
                      >
                        Remove
                      </button>
                    </form>
                    <% } %>
                  </td>
                </tr>
                <% }) %>
                <% } else { %>
                <tr>
                  <td colspan="4">No team members yet.</td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>

          <% if (['owner', 'admin'].includes(currentProjectRole)) { %>
          <div class="divider"></div>
          <form
            action="/projects/<%= project._id %>/users/add"
            method="POST"
            class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end"
          >
            <div class="form-control">
              <label class="label" for="inviteEmail">
                <span class="label-text">User email</span>
              </label>
              <input
                id="inviteEmail"
                name="email"
                type="email"
                required
                class="input input-bordered w-full"
              />
            </div>
            <div class="form-control">
              <label class="label" for="inviteRole">
                <span class="label-text">Role</span>
              </label>
              <select
                id="inviteRole"
                name="role"
                class="select select-bordered w-full"
              >
                <option value="viewer">Viewer</option>
                <option value="admin">Admin</option>
                <option value="owner">Owner</option>
              </select>
            </div>
            <div class="form-control">
              <button type="submit" class="btn btn-primary w-full">
                Add user
              </button>
            </div>
          </form>
          <% } %>
        </div>
      </section>

      <!-- Section 4: Danger Zone -->
      <section class="card bg-base-100 shadow border border-error/40">
        <div class="card-body space-y-4">
          <h2 class="card-title text-xl text-error">Danger zone</h2>
          <p class="text-sm text-base-content/70">
            Soft-deleting this project will hide it from all users and stop new
            data from being ingested. The project and its data will remain
            marked as deleted until you implement a separate cleanup or
            recovery mechanism.
          </p>

          <div class="alert alert-warning text-xs">
            <span>
              This action affects all data tied to this project, including
              events, page views, and metrics. Ensure you have exported or backed
              up anything critical.
            </span>
          </div>

          <div v-if="canDelete" class="mt-2">
            <button
              type="button"
              class="btn btn-outline btn-error"
              @click="openDeleteModal()"
            >
              Soft delete project
            </button>
          </div>

          <div v-if="canDelete" class="mt-2">
            <button
              type="button"
              class="btn btn-error"
              @click="openClearDataModal()"
            >
              Clear data
            </button>
          </div>

          <!-- Delete confirmation modal -->
          <dialog ref="deleteModal" class="modal">
            <div class="modal-box">
              <h3 class="font-bold text-lg mb-2">Soft delete project?</h3>
              <p class="text-sm text-base-content/70 mb-4">
                This will mark the project as deleted. It will disappear from
                lists and stop accepting new data. There is no automated
                recovery flow yet, so only perform this if you are sure.
              </p>
              <div class="modal-action">
                <form method="dialog" class="flex gap-2">
                  <button type="button" class="btn" @click="closeDeleteModal()">
                    Cancel
                  </button>
                </form>
                <form
                  action="/projects/<%= project._id %>/delete"
                  method="POST"
                >
                  <button type="submit" class="btn btn-error">
                    Yes, delete project
                  </button>
                </form>
              </div>
            </div>
          </dialog>

          <dialog ref="clearDataModal" class="modal">
            <div class="modal-box">
              <h3 class="font-bold text-lg mb-2">Clear all project data?</h3>
              <p class="text-sm text-base-content/70 mb-4">
                This will permanently delete all ingested data for this project (events, errors, page views, performance metrics, and AI analysis runs).
                The project, members, and API keys will remain.
              </p>
              <div class="modal-action">
                <form method="dialog" class="flex gap-2">
                  <button type="button" class="btn" @click="closeClearDataModal()">
                    Cancel
                  </button>
                </form>
                <form
                  action="/projects/<%= project._id %>/clear-data"
                  method="POST"
                >
                  <button type="submit" class="btn btn-error">
                    Yes, clear data
                  </button>
                </form>
              </div>
            </div>
          </dialog>
        </div>
      </section>
    </main>

    <script>
      const { createApp, ref } = Vue;

      createApp({
        setup() {
          const project = ref(<%- JSON.stringify(project) %>);
          const currentProjectRole = '<%= currentProjectRole %>';

          const dropEventsConfig = ref(<%- JSON.stringify(dropEventsConfig || { enabled: false, mode: 'blacklist', filters: [] }) %>);
          const dropEnabled = ref(Boolean(dropEventsConfig.value && dropEventsConfig.value.enabled));
          const dropMode = ref((dropEventsConfig.value && dropEventsConfig.value.mode) || 'blacklist');
          const dropFilters = ref(Array.isArray(dropEventsConfig.value && dropEventsConfig.value.filters) ? dropEventsConfig.value.filters : []);
          const dropEventsCount = ref(<%- JSON.stringify(typeof dropEventsCount === 'number' ? dropEventsCount : 0) %>);

          if (!dropFilters.value.length) {
            dropFilters.value.push({ key: '', op: 'equals', value: '' });
          } else {
            for (let i = 0; i < dropFilters.value.length; i += 1) {
              if (!dropFilters.value[i].op) dropFilters.value[i].op = 'equals';
            }
          }

          const showSecret = ref(false);
          const regenerateModal = ref(null);
          const deleteModal = ref(null);
          const clearDataModal = ref(null);

          const canRegenerateKeys = ['owner'].includes(currentProjectRole);
          const canDelete = ['owner'].includes(currentProjectRole);

          const publicUrl = <%- JSON.stringify(publicUrl || '') %>;
          const publicUrlBase = publicUrl ? String(publicUrl).replace(/\/$/, '') : '';

          const publicLinkUrl = project.value && project.value.publicLinkToken
            ? `${publicUrlBase || location.origin}/p/${project.value._id}/${project.value.publicLinkToken}/dashboard`
            : '';

          const sdkSnippet = publicUrlBase
            ? [
                '<!-- SuperInsights SDK -->',
                `<script src="${publicUrlBase}/sdk/superinsights.js"><\\/script>`,
                '<script>',
                `  SuperInsights.init(${JSON.stringify(project.value.publicApiKey)}, {`,
                `    apiUrl: ${JSON.stringify(publicUrlBase)},`,
                '    batchSize: 20,',
                '    flushInterval: 5000,',
                '    debug: false,',
                '  });',
                '<\\/script>',
              ].join('\n')
            : [
                '<!-- SuperInsights SDK -->',
                '<script>',
                '  (function () {',
                '    var s = document.createElement("script");',
                '    s.src = location.origin + "/sdk/superinsights.js";',
                '    s.onload = function () {',
                `      SuperInsights.init(${JSON.stringify(project.value.publicApiKey)}, {`,
                '        apiUrl: location.origin,',
                '        batchSize: 20,',
                '        flushInterval: 5000,',
                '        debug: false,',
                '      });',
                '    };',
                '    document.head.appendChild(s);',
                '  })();',
                '<\\/script>',
              ].join('\n');

          const trackEventExample = `// Custom event\nSuperInsights.trackEvent("signup_completed", {\n  plan: "pro",\n  method: "google",\n});`;

          const trackTimingExample = `// Timed event (duration in milliseconds)\nconst t0 = performance.now();\n\n// ... do some work\nawait fetch("/api/checkout", { method: "POST" });\n\nSuperInsights.trackTiming("checkout_submit", Math.round(performance.now() - t0), {\n  provider: "stripe",\n});`;

          const timeAsyncExample = `// Measure an async function (promise)\nawait SuperInsights.timeAsync("api_fetch_products", async () => {\n  const resp = await fetch("/api/products");\n  return resp.json();\n}, {\n  view: "catalog",\n});`;

          function copyToClipboard(value, message) {
            if (!value) return;
            navigator.clipboard
              .writeText(value)
              .then(() => {
                console.log(message || 'Copied');
              })
              .catch(() => {
                console.log('Copy failed');
              });
          }

          function toggleSecret() {
            showSecret.value = !showSecret.value;
          }

          function openRegenerateModal() {
            if (regenerateModal.value) {
              regenerateModal.value.showModal();
            }
          }

          function closeRegenerateModal() {
            if (regenerateModal.value) {
              regenerateModal.value.close();
            }
          }

          function openDeleteModal() {
            if (deleteModal.value) {
              deleteModal.value.showModal();
            }
          }

          function closeDeleteModal() {
            if (deleteModal.value) {
              deleteModal.value.close();
            }
          }

          function openClearDataModal() {
            if (clearDataModal.value) {
              clearDataModal.value.showModal();
            }
          }

          function closeClearDataModal() {
            if (clearDataModal.value) {
              clearDataModal.value.close();
            }
          }

          function addDropFilterRow() {
            dropFilters.value.push({ key: '', op: 'equals', value: '' });
          }

          function removeDropFilterRow(idx) {
            if (!Array.isArray(dropFilters.value)) return;
            dropFilters.value.splice(idx, 1);
            if (!dropFilters.value.length) {
              dropFilters.value.push({ key: '', op: 'equals', value: '' });
            }
          }

          function reportDrops() {
            const url = `/projects/${project.value._id}/settings/drop-events/report`;
            fetch(url)
              .then((r) => r.json())
              .then((data) => {
                if (data && typeof data.dropped === 'number') {
                  dropEventsCount.value = data.dropped;
                }
              })
              .catch(() => {
                // ignore
              });
          }

          return {
            project,
            currentProjectRole,
            dropEnabled,
            dropMode,
            dropFilters,
            dropEventsCount,
            showSecret,
            regenerateModal,
            deleteModal,
            clearDataModal,
            canRegenerateKeys,
            canDelete,
            publicLinkUrl,
            sdkSnippet,
            trackEventExample,
            trackTimingExample,
            timeAsyncExample,
            copyToClipboard,
            toggleSecret,
            openRegenerateModal,
            closeRegenerateModal,
            openDeleteModal,
            closeDeleteModal,
            openClearDataModal,
            closeClearDataModal,
            addDropFilterRow,
            removeDropFilterRow,
            reportDrops,
          };
        },
      }).mount('#app');
    </script>
  </body>
</html>
