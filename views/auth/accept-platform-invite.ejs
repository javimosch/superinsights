<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
    />
  </head>
  <body class="min-h-screen bg-base-200">
    <%- include('../partials/navbar') %>

    <main class="container mx-auto p-4 flex justify-center">
      <div class="card bg-base-100 shadow-xl w-full max-w-xl">
        <div class="card-body space-y-4">
          <h1 class="card-title text-2xl">Accept platform invite</h1>

          <div class="text-sm text-base-content/70">
            You were invited to join the platform as <strong class="capitalize"><%= invite.role %></strong>.
          </div>

          <% if (errors && errors.length) { %>
          <div class="alert alert-error">
            <ul class="list-disc list-inside text-sm">
              <% errors.forEach(function (err) { %>
              <li><%= err %></li>
              <% }) %>
            </ul>
          </div>
          <% } %>

          <form action="/accept-platform-invite" method="POST" class="space-y-4">
            <input type="hidden" name="token" value="<%= token %>" />

            <div class="form-control">
              <label class="label" for="email"><span class="label-text">Email</span></label>
              <input id="email" type="email" class="input input-bordered w-full" value="<%= values && values.email ? values.email : '' %>" readonly />
            </div>

            <% if (!userExists) { %>
            <div class="form-control">
              <label class="label" for="name"><span class="label-text">Name (optional)</span></label>
              <input id="name" name="name" type="text" class="input input-bordered w-full" value="<%= values && values.name ? values.name : '' %>" />
            </div>

            <div class="form-control">
              <label class="label" for="password"><span class="label-text">Choose a password</span></label>
              <input id="password" name="password" type="password" minlength="8" required class="input input-bordered w-full" />
            </div>
            <% } %>

            <div class="form-control">
              <button type="submit" class="btn btn-primary w-full">Accept invite</button>
            </div>
          </form>
        </div>
      </div>
    </main>
  </body>
</html>
